<form id='formulario_enquete' name='formulario_enquete' class="row" novalidate ng-submit="salvar(this.formulario_enquete)">
    <div class="col-md-6">
        <div class="col-sm-12" field-form-group='formulario_enquete.nome'>
            <field-label value='enquete.nome' for='formulario_enquete.nome' ></field-label>
            <input ng-model="enquete.nome" class="form-control" name='nome' required  />
            <field-message field="formulario_enquete.nome"></field-message>
        </div>
        <div class="col-sm-12">
            <div field-form-group='formulario_enquete.dataInicio'>
                <div field-form-group='formulario_enquete.dataTermino'>
                    <field-label value='enquete.vigencia'  ></field-label>
                    <div class='row'>
                        <div class='col-sm-12'>
                            <calvin-datepicker ng-model="enquete.dataInicio" placeholder="{{'enquete.dataInicio' | translate}}"
                                               name='dataInicio' required date-pattern="{{'config.pattern.input.dateHour' | translate}}"
                                               ></calvin-datepicker>
                            <field-message field="formulario_enquete.dataInicio"></field-message>
                        </div>
                        <div class='col-sm-12'>
                            <calvin-datepicker ng-model="enquete.dataTermino" placeholder="{{'enquete.dataTermino' | translate}}"
                                               name='dataTermino' required date-pattern="{{'config.pattern.input.dateHour' | translate}}"
                                               ></calvin-datepicker>
                            <field-message field="formulario_enquete.dataTermino"></field-message>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="col-sm-12" field-form-group='formulario_enquete.descricao'>
            <field-label value='enquete.descricao' for='formulario_enquete.descricao' ></field-label>
            <textarea rows="5" ng-model="enquete.descricao" class="form-control" name='descricao'  required ></textarea>
            <field-message field="formulario_enquete.descricao"></field-message>
        </div>
    </div>
    <div class="col-lg-12" field-form-group='formulario_enquete.questoes' >
        <field-label value='enquete.questoes' for='formulario_enquete.questoes' ></field-label>
        <table ng-controller='CrudQuestaoController' name='questoes' required 
               ng-model='enquete.questoes' class="table table-striped table-hover">
            <tr ng-repeat="questao in enquete.questoes">
                <td>
                    <div class='col-sm-12' field-form-group="formulario_enquete['questao' + enquete.questoes.indexOf(questao)]">
                        <div class="input-group" >
                            <input required ng-attr-name='questao{{enquete.questoes.indexOf(questao)}}' placeholder="{{'enquete.questao.questao' | translate}}" class="form-control" ng-model="questao.questao" />
                            <a class="input-group-addon btn btn-default" ng-click="removeQuestao(questao)"
                               title="{{'enquete.questao.remover' | translate}} {{questao.questao}}" >
                                <i class="glyphicon glyphicon-trash"></i>
                            </a>
                        </div>
                        <field-message field="formulario_enquete['questao' + enquete.questoes.indexOf(questao)]"></field-message>
                    </div>
                    <div class="col-sm-12" field-form-group="formulario_enquete['opcoes' + enquete.questoes.indexOf(questao)]">
                        <br/>
                        <div ng-attr-name='opcoes{{enquete.questoes.indexOf(questao)}}' ng-model='questao.opcoes' required>
                            <span ng-repeat="opcao in questao.opcoes">
                                <div field-form-group="formulario_enquete['questao' + enquete.questoes.indexOf(questao) + '_opcao' + questao.opcoes.indexOf(opcao)]">
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <i class="fa fa-circle"></i>
                                        </span>
                                        <input ng-attr-name='questao{{enquete.questoes.indexOf(questao)}}_opcao{{questao.opcoes.indexOf(opcao)}}'
                                               class="form-control" placeholder="{{'enquete.opcao.opcao' | translate}}" ng-model="opcao.opcao"
                                               required  />
                                        <a class="input-group-addon btn btn-default"  ng-click="removeOpcao(questao, opcao)"
                                           title="{{'enquete.opcao.remover' | translate}} {{opcao.opcao}}" data-toggle="tooltip">
                                            <i class="fa fa-trash"></i>
                                        </a>
                                    </div>
                                    <field-message field="formulario_enquete['questao' + enquete.questoes.indexOf(questao) + '_opcao' + questao.opcoes.indexOf(opcao)]"></field-message>
                                </div>
                            </span>
                        </div>
                        <br/>
                        <a class="btn btn-default" ng-click="addOpcao(questao)" >
                            <i class="glyphicon glyphicon-plus"></i>
                            {{'enquete.opcao.mais' | translate}}
                        </a>
                        <field-message field="formulario_enquete['opcoes' + enquete.questoes.indexOf(questao)]"></field-message>
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <a class="btn btn-default" ng-click="addQuestao()" >
                        <i class="glyphicon glyphicon-plus"></i>
                        {{'enquete.questao.mais' | translate}}
                    </a>
                </td>
            </tr>
        </table>
        <field-message field="formulario_enquete.questoes"></field-message>
    </div>
    <div class="col-sm-12 comandos">
        <hr/>
        <input type='submit' ng-disabled='inProgress'  class="btn btn-primary" value="{{'global.salvar' | translate}}" />
        <a class="btn btn-default" ng-disabled='inProgress'  ui-sref="enquete">{{'global.cancelar' | translate}}</a>
    </div>
</form>